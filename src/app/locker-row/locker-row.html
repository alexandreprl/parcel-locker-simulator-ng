<div class="panel locker-panel">
  <div class="header">{{ this.locker.location|uppercase }}</div>
  <div class="flex space-x-2 flex-col md:flex-row">
    <div class="flex-1">
      <div class="flex flex-col space-y-1 panel slot-panel">
        @for (p of locker.parcels; track p.id) {
          <div class="slot">
            <app-parcel-row [parcel]="p"></app-parcel-row>
          </div>
        }
        @for (i of [].constructor(locker.slot - locker.parcels.length); track i) {
          <div class="slot border border-dashed inline-block"></div>
        }
        <button class="slot hover:border-solid cursor-pointer border border-dashed w-full inline-block"
                (click)="this.newLockerSlot()">New
          slot
          ({{ this.newSlotPrice()|currency }})
        </button>

      </div>
    </div>
    <div class="flex-1 flex flex-col items-stretch space-y-2">

      @if (locker.trucks.length > 0) {
        @if (this.uiService.isTrucksListExpanded()) {
          <app-truck-row [truck]="locker.trucks[0]"></app-truck-row>

          @if (locker.trucks.length > 1) {
            <button (click)="this.uiService.toggleTrucksListExpanding()" class="button2">
              ▼ {{ locker.trucks.length - 1 }} other trucks waiting
            </button>
          }
          @for (truck of locker.trucks.slice(1); track truck.id) {
            <app-truck-row [truck]="truck"></app-truck-row>
          }
        } @else {

          <app-truck-row [truck]="locker.trucks[0]"></app-truck-row>
          @if (locker.trucks.length > 1) {
            <button (click)="this.uiService.toggleTrucksListExpanding()" class="button2">
              ► {{ locker.trucks.length - 1 }} other trucks waiting
            </button>
          }
        }

      }
      @if (locker.warehouse) {
        <button
          class="button buy-truck-button"
          (click)="this.addTruck()">Buy Truck ({{ this.newTruckPrice()|currency }})
        </button>
      }
    </div>
  </div>
</div>
