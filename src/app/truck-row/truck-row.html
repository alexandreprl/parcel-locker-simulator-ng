<div class="w-full flex flex-col  items-stretch panel mb-1 p-2 truck-panel">
  <div class="header flex flex-row justify-center">
    <!--  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  class="size-6 bg-white border mr-2" [style.fill]="this.truck.color">-->
    <!--    <path-->
    <!--      d="M3.375 4.5C2.339 4.5 1.5 5.34 1.5 6.375V13.5h12V6.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM13.5 15h-12v2.625c0 1.035.84 1.875 1.875 1.875h.375a3 3 0 1 1 6 0h3a.75.75 0 0 0 .75-.75V15Z"/>-->
    <!--    <path-->
    <!--      d="M8.25 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0ZM15.75 6.75a.75.75 0 0 0-.75.75v11.25c0 .087.015.17.042.248a3 3 0 0 1 5.958.464c.853-.175 1.522-.935 1.464-1.883a18.659 18.659 0 0 0-3.732-10.104 1.837 1.837 0 0 0-1.47-.725H15.75Z"/>-->
    <!--    <path d="M19.5 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"/>-->
    <!--  </svg>-->
    <span class="text-nowrap">Truck #{{ truck.id }}</span>
  </div>
  <div class="flex flex-col space-y-2">
    <div class="flex flex-col space-y-2 panel-w slot-panel">
      @for (p of truck.parcels; track p.id) {
        <div class="slot">
          <app-parcel-row [parcel]="p"></app-parcel-row>
        </div>
      }
      @for (i of [].constructor(truck.slot - truck.parcels.length); track i) {

        <div class="slot border border-dashed inline-block"></div>

      }

      <button class="slot hover:border-solid cursor-pointer border border-dashed w-full inline-block"
              (click)="this.newTruckSlot()">
        New slot ({{ this.newSlotPrice()|currency }})
      </button>

    </div>
    @if (!this.isOnRoad()) {
      <!--  <button (click)="this.fillTruck()">-->
        <!--    Fill truck-->
        <!--  </button>-->
        <!--  <button (click)="this.emptyTruck()">-->
        <!--    Empty truck-->
        <!--  </button>-->

      @if (!this.isParkedTruck()) {
        <button (click)="this.parkTruck()" class="button">Park truck</button>
      }
      <div class="flex flex-row flex-wrap items-center justify-start space-x-2 space-y-1">
        <span>Send to</span>
        @for (l of this.getPotentialDestinationLockersList(); track l.id) {
          <button class="button2" (click)="this.goto(l)">
            {{ l.location }}
          </button>
        }
      </div>
      <div>
        @if (this.upgradeService.isAutomaticModeAllowed()) {
        <div class="slot-panel panel">
          @if (this.truck.automaticMode) {
            Automatic route from {{ this.lockerService.getLockerFromId(this.routeFromId)?.location }} to {{ this.lockerService.getLockerFromId(this.routeToId)?.location }}
            <button class="button2" (click)="this.deactivateAutomaticMode()">
              Stop
            </button>
          } @else {
            <div class="flex flex-col items-stretch">
              <div class="font-bold text-center header">Set up automatic route</div>
              <div>
              From:
              <select [(ngModel)]="this.routeFromId">

                @for (l of this.getLockersList(); track l.id) {
                  <option [value]="l.id">
                    {{ l.location }}
                  </option>
                }
              </select></div>
              <div>
              To:
              <select [(ngModel)]="this.routeToId">

                @for (l of this.getLockersList(); track l.id) {
                  <option [value]="l.id">
                    {{ l.location }}
                  </option>
                }
              </select>
              </div>
              <button class="button2" (click)="this.activateAutomaticMode()">
                Go
              </button>
            </div>
          }
        </div>
        }@else{
          <div class="italic text-gray-400 text-sm block text-center">
          Automatic mode unavailable
          </div>
        }
      </div>

      <!--  <button class="button2" (click)="this.deliver()">Deliver</button>-->
    }
    <!--  @if (this.truck.parcels.length>0) {-->
    <!--    <button class="button2" (click)="this.dropContent()">-->
    <!--      Drop content-->
    <!--    </button>-->
    <!--  }-->
  </div>

</div>
